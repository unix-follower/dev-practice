flowchart TD
    A[Start: Query with WHERE clause]
    B[Does WHERE clause match partial index predicate?]
    A --> B

    C{Is partial index defined on multiple columns?}
    B --> C

    C -->|Yes| D[Does query filter on all indexed columns and match predicate?]
    C -->|No| E[Does query match single-column partial index predicate?]

    D -->|Yes| F[Use multicolumn partial index for index scan]
    D -->|No| G[Index not used; perform sequential scan or use other index]

    E -->|Yes| H[Use partial index for index scan]
    E -->|No| G

    F --> I[Fetch matching rows]
    H --> I
    G --> I

    I --> J[Return results to client]

    %% Scenario: Parameterized query misses index
    G --> K{Is query parameterized and predicate not matched?}
    K -->|Yes| L[Index not used; sequential scan]
    K -->|No| J
