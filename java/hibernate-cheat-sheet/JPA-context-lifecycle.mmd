flowchart TD
    A[Start]
    B[Open Session]
    B@{ shape: comment, label: "EntityManager em = emf.createEntityManager()" }
    A --> B

    C[Begin Transaction]
    C@{ shape: comment, label: "em.getTransaction().begin()" }
    B --> C

    D[Persistence Context Created]
    C --> D

    E["Entity Operations (CRUD)"]
    E@{ shape: comment, label: "em.persist(), em.merge(), em.remove(), em.find()" }
    D --> E

    F[Flush Changes to Database]
    F@{ shape: comment, label: "em.flush()" }
    E --> F

    G[Commit/Rollback Transaction]
    G@{ shape: comment, label: "em.getTransaction().commit() / em.getTransaction().rollback()" }
    F --> G

    H[Persistence Context Cleared]
    H@{ shape: comment, label: "em.clear()" }
    G --> H

    I[Close Session]
    I@{ shape: comment, label: "em.close()" }
    H --> I

    J[End]
    I --> J
